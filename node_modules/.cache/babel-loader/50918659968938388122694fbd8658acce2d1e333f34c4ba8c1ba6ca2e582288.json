{"ast":null,"code":"import React,{useState,useEffect}from'react';import styles from'./shop.module.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Shop=_ref=>{let{userId}=_ref;const[availablePoints,setAvailablePoints]=useState(0);const[tools,setTools]=useState([]);const[purchasedTools,setPurchasedTools]=useState([]);useEffect(()=>{// 사용자의 포인트를 가져오는 함수\nconst fetchPoints=async()=>{const token=localStorage.getItem('accessToken');// JWT 토큰 가져오기\ntry{const response=await fetch(\"http://netrunner.life:4000/missions/points/\".concat(userId),{method:'POST',headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(token)// JWT 포함\n}});if(!response.ok){throw new Error(\"HTTP error! status: \".concat(response.status));}const data=await response.json();setAvailablePoints(data);}catch(error){console.error('포인트 가져오기 오류:',error);}};// 사용할 수 있는 도구를 가져오는 함수\nconst fetchTools=async()=>{const token=localStorage.getItem('accessToken');// JWT 토큰 가져오기\ntry{const response=await fetch('http://netrunner.life:4000/missions/tools',{method:'GET',headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(token)// JWT 포함\n}});if(!response.ok){throw new Error(\"HTTP error! status: \".concat(response.status));}const data=await response.json();setTools(data);}catch(error){console.error('도구 가져오기 오류:',error);}};fetchPoints();fetchTools();},[userId]);// 도구를 구매하는 함수\nconst handlePurchase=tool=>{if(availablePoints>=tool.cost){setAvailablePoints(availablePoints-tool.cost);setPurchasedTools([...purchasedTools,tool]);}};return/*#__PURE__*/_jsxs(\"div\",{className:styles.shopContainer,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.shopHeader,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\uD574\\uD0B9 \\uD234 \\uC0C1\\uC810\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\uBCF4\\uC720 \\uD3EC\\uC778\\uD2B8: \",availablePoints]})]}),/*#__PURE__*/_jsx(\"div\",{className:styles.toolsList,children:tools.map(tool=>/*#__PURE__*/_jsxs(\"div\",{className:styles.toolItem,children:[/*#__PURE__*/_jsx(\"h3\",{children:tool.name}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\uAC00\\uACA9: \",tool.cost,\" \\uD3EC\\uC778\\uD2B8\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handlePurchase(tool),disabled:availablePoints<tool.cost||purchasedTools.includes(tool),children:availablePoints>=tool.cost?'구매하기':'포인트 부족'})]},tool.id))})]});};export default Shop;","map":{"version":3,"names":["React","useState","useEffect","styles","jsx","_jsx","jsxs","_jsxs","Shop","_ref","userId","availablePoints","setAvailablePoints","tools","setTools","purchasedTools","setPurchasedTools","fetchPoints","token","localStorage","getItem","response","fetch","concat","method","headers","ok","Error","status","data","json","error","console","fetchTools","handlePurchase","tool","cost","className","shopContainer","children","shopHeader","toolsList","map","toolItem","name","onClick","disabled","includes","id"],"sources":["C:/Users/USER/Documents/GitHub/NETRUNNER/src/components/shop.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport styles from './shop.module.css';\r\n\r\nconst Shop = ({ userId }) => {\r\n  const [availablePoints, setAvailablePoints] = useState(0);\r\n  const [tools, setTools] = useState([]);\r\n  const [purchasedTools, setPurchasedTools] = useState([]);\r\n\r\n  useEffect(() => {\r\n    // 사용자의 포인트를 가져오는 함수\r\n    const fetchPoints = async () => {\r\n      const token = localStorage.getItem('accessToken'); // JWT 토큰 가져오기\r\n      try {\r\n        const response = await fetch(`http://netrunner.life:4000/missions/points/${userId}`, {\r\n          method: 'POST',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n            'Authorization': `Bearer ${token}` // JWT 포함\r\n          },\r\n        });\r\n        if (!response.ok) {\r\n          throw new Error(`HTTP error! status: ${response.status}`);\r\n        }\r\n        const data = await response.json();\r\n        setAvailablePoints(data);\r\n      } catch (error) {\r\n        console.error('포인트 가져오기 오류:', error);\r\n      }\r\n    };\r\n\r\n    // 사용할 수 있는 도구를 가져오는 함수\r\n    const fetchTools = async () => {\r\n      const token = localStorage.getItem('accessToken'); // JWT 토큰 가져오기\r\n      try {\r\n        const response = await fetch('http://netrunner.life:4000/missions/tools', {\r\n          method: 'GET',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n            'Authorization': `Bearer ${token}` // JWT 포함\r\n          },\r\n        });\r\n        if (!response.ok) {\r\n          throw new Error(`HTTP error! status: ${response.status}`);\r\n        }\r\n        const data = await response.json();\r\n        setTools(data);\r\n      } catch (error) {\r\n        console.error('도구 가져오기 오류:', error);\r\n      }\r\n    };\r\n\r\n    fetchPoints();\r\n    fetchTools();\r\n  }, [userId]);\r\n\r\n  // 도구를 구매하는 함수\r\n  const handlePurchase = (tool) => {\r\n    if (availablePoints >= tool.cost) {\r\n      setAvailablePoints(availablePoints - tool.cost);\r\n      setPurchasedTools([...purchasedTools, tool]);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={styles.shopContainer}>\r\n      <div className={styles.shopHeader}>\r\n        <h2>해킹 툴 상점</h2>\r\n        <p>보유 포인트: {availablePoints}</p>\r\n      </div>\r\n      <div className={styles.toolsList}>\r\n        {tools.map(tool => (\r\n          <div key={tool.id} className={styles.toolItem}>\r\n            <h3>{tool.name}</h3>\r\n            <p>가격: {tool.cost} 포인트</p>\r\n            <button \r\n              onClick={() => handlePurchase(tool)} \r\n              disabled={availablePoints < tool.cost || purchasedTools.includes(tool)}>\r\n              {availablePoints >= tool.cost ? '구매하기' : '포인트 부족'}\r\n            </button>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nShop.propTypes = {\r\n  userId: PropTypes.string.isRequired\r\n};\r\n\r\nexport default Shop;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}