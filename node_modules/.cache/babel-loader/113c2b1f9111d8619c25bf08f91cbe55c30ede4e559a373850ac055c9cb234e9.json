{"ast":null,"code":"import React,{forwardRef,useImperativeHandle,useState,useEffect}from'react';import{TerminalInteraction}from'./TerminalInteraction';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{faFolder,faFile}from'@fortawesome/free-solid-svg-icons';import{SocketResult}from'./socket';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function getIconForType(type){switch(type){case'directory':return/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faFolder,size:\"4x\",color:\"white\"});case'file':return/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faFile,size:\"4x\",color:\"white\"});default:return/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faFile,size:\"4x\",color:\"white\"});}}const DirectoryViewer=/*#__PURE__*/forwardRef(function(props,ref){let initialPath=arguments.length>2&&arguments[2]!==undefined?arguments[2]:'/';const[path,setPath]=useState(initialPath);const[contents,setContents]=useState(null);const socketss=new SocketResult();useImperativeHandle(ref,()=>({appendToTerminal:text=>{TerminalInteraction.appendToTerminal(text);socketss.sendMessage(text);socketss.getMessage(char=>{console.log(char);});socketss.sendMessage(\"ls -al\");socketss.getMessage(chat=>{const temp1=chat;const temp2=chat;const regex1=/[^[\\]]+(?=\\[)/g;const regex2=/(?<=\\[).*?(?=\\])/g;const files=temp1.match(regex1);const filestype=temp2.match(regex2);const setDir={files,filestype};console.log(setDir);setContents(setDir);});},updateDirectoryContent:newContent=>{socketss.sendMessage('pwd');socketss.getMessage(chat=>{socketss.sendMessage(\"cd \".concat(chat));});socketss.sendMessage(\"ls -al\");socketss.getMessage(chat=>{const temp1=chat;const temp2=chat;const regex1=/[^[\\]]+(?=\\[)/g;const regex2=/(?<=\\[).*?(?=\\])/g;const files=temp1.match(regex1);const filestype=temp2.match(regex2);const setDir={files,filestype};setContents(setDir);});}}));useEffect(()=>{const fetchDirectoryData=async()=>{let fdata=null;await fetch('http://netrunner.life:4000/filesystem/1',{method:'GET',headers:{'Authorization':\"Bearer \".concat(localStorage.getItem('accessToken'))}}).then(response=>response.json()).then(data=>{const files=data.files;const filestype=data.filestype;fdata={files,filestype};}).catch(error=>console.error('초기화 에러:',error));setContents(fdata);};fetchDirectoryData();},[]);function handleItemClick(item,type){if(type==='directory'){const newPath=path==='/'?\"/\".concat(item):\"\".concat(path,\"/\").concat(item);setPath(newPath);ref.current.appendToTerminal(\"cd \".concat(item));}else{ref.current.appendToTerminal(\"cat \".concat(item));console.log(item+' file clicked');}}if(!contents){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});}const gridStyle={display:'grid',gridTemplateColumns:'repeat(auto-fill, minmax(100px, 1fr))',gap:'10px',textAlign:'center',justifyContent:'flex-start',flexGrow:1,color:'white',padding:'10px',// 내부 여백 추가 (선택 사항)\noverflowY:'auto'// 세로 스크롤 가능\n};const itemStyle={cursor:'default',display:'flex',flexDirection:'column',justifyContent:'flex-start',alignItems:'center',color:'white'};const iconStyle={cursor:'pointer'};const pathBar={position:'absolute',bottom:0,textAlign:'left',backgroundColor:'#c5e3df9d',color:'white',width:'100%',padding:'10px'};return/*#__PURE__*/_jsxs(\"div\",{style:{position:'relative',display:'flex',color:'white',flexDirection:'column',height:'55.5vh'},children:[/*#__PURE__*/_jsx(\"div\",{style:{flexGrow:1,display:'flex',flexDirection:'column',overflow:'hidden'},children:/*#__PURE__*/_jsx(\"div\",{style:gridStyle,children:contents.files.map((item,index)=>/*#__PURE__*/_jsxs(\"div\",{style:itemStyle,children:[/*#__PURE__*/_jsx(\"div\",{style:iconStyle,onClick:()=>handleItemClick(item,contents.filestype[index]),children:getIconForType(contents.filestype[index])}),/*#__PURE__*/_jsx(\"div\",{children:item})]},index))})}),/*#__PURE__*/_jsx(\"p\",{style:pathBar,children:path})]});});export{DirectoryViewer};","map":{"version":3,"names":["React","forwardRef","useImperativeHandle","useState","useEffect","TerminalInteraction","FontAwesomeIcon","faFolder","faFile","SocketResult","jsx","_jsx","jsxs","_jsxs","getIconForType","type","icon","size","color","DirectoryViewer","props","ref","initialPath","arguments","length","undefined","path","setPath","contents","setContents","socketss","appendToTerminal","text","sendMessage","getMessage","char","console","log","chat","temp1","temp2","regex1","regex2","files","match","filestype","setDir","updateDirectoryContent","newContent","concat","fetchDirectoryData","fdata","fetch","method","headers","localStorage","getItem","then","response","json","data","catch","error","handleItemClick","item","newPath","current","children","gridStyle","display","gridTemplateColumns","gap","textAlign","justifyContent","flexGrow","padding","overflowY","itemStyle","cursor","flexDirection","alignItems","iconStyle","pathBar","position","bottom","backgroundColor","width","style","height","overflow","map","index","onClick"],"sources":["/Users/jeon-aseob/Desktop/NETRUNNER/src/components/fileSystem.jsx"],"sourcesContent":["import React, { forwardRef, useImperativeHandle, useState, useEffect } from 'react';\nimport { TerminalInteraction } from './TerminalInteraction';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faFolder, faFile } from '@fortawesome/free-solid-svg-icons';\nimport { SocketResult } from './socket';\n\nfunction getIconForType(type) {\n  switch (type) {\n    case 'directory':\n      return <FontAwesomeIcon icon={faFolder} size=\"4x\" color='white' />;\n    case 'file':\n      return <FontAwesomeIcon icon={faFile} size=\"4x\" color='white' />;\n    default:\n      return <FontAwesomeIcon icon={faFile} size=\"4x\" color='white' />;\n  }\n}\n\nconst DirectoryViewer = forwardRef((props, ref, initialPath = '/') => {\n  const [path, setPath] = useState(initialPath);\n  const [contents, setContents] = useState(null);\n  const socketss = new SocketResult();\n\n  useImperativeHandle(ref, () => ({\n    appendToTerminal: (text) => {\n      TerminalInteraction.appendToTerminal(text);\n      socketss.sendMessage(text);\n      socketss.getMessage((char)=>{\n        console.log(char);\n      });\n      socketss.sendMessage(\"ls -al\");\n      socketss.getMessage((chat) => {\n      const temp1 = chat;\n      const temp2 = chat;\n      const regex1 = /[^[\\]]+(?=\\[)/g;\n      const regex2 = /(?<=\\[).*?(?=\\])/g;\n      const files = temp1.match(regex1); \n      const filestype = temp2.match(regex2);\n      const setDir = {files,filestype};\n      console.log(setDir);\n      setContents(setDir);\n    });\n    },\n\n    updateDirectoryContent: (newContent) => {\n      socketss.sendMessage('pwd');\n      socketss.getMessage((chat) => {\n        socketss.sendMessage(`cd ${chat}`);\n      });\n      socketss.sendMessage(\"ls -al\");\n      socketss.getMessage((chat) => {\n          const temp1 = chat;\n          const temp2 = chat;\n          const regex1 = /[^[\\]]+(?=\\[)/g;\n          const regex2 = /(?<=\\[).*?(?=\\])/g;\n          const files = temp1.match(regex1); \n          const filestype = temp2.match(regex2);\n          const setDir ={files,filestype};\n          setContents(setDir);\n        });\n    },\n  }\n));\n\nuseEffect(() => {\n  const fetchDirectoryData = async () => {\n    let fdata = null;\n    await fetch('http://netrunner.life:4000/filesystem/1', {\n      method: 'GET',\n      headers: {\n        'Authorization': `Bearer ${localStorage.getItem('accessToken')}`,\n      },\n    })\n    .then(response => response.json())\n    .then(data => {\n      const files = data.files;\n      const filestype = data.filestype;\n      fdata = {files,filestype};\n    })\n    .catch(error => console.error('초기화 에러:', error));\n    setContents(fdata);\n  };\n  fetchDirectoryData();\n}, []);\n\nfunction handleItemClick(item, type) {\n  if (type === 'directory') {\n    const newPath = path === '/' ? `/${item}` : `${path}/${item}`;\n    setPath(newPath);\n    ref.current.appendToTerminal(`cd ${item}`);\n  } else {\n    ref.current.appendToTerminal(`cat ${item}`);\n    console.log(item + ' file clicked');\n  }\n}\n\n  if (!contents) {\n    return <div>Loading...</div>;\n  }\n\n  const gridStyle = {\n    display: 'grid',\n    gridTemplateColumns: 'repeat(auto-fill, minmax(100px, 1fr))',\n    gap: '10px',\n    textAlign: 'center',\n    justifyContent: 'flex-start',\n    flexGrow: 1,\n    color: 'white',\n    padding: '10px', // 내부 여백 추가 (선택 사항)\n    overflowY: 'auto', // 세로 스크롤 가능\n  };\n\n  const itemStyle = {\n    cursor: 'default',\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'flex-start',\n    alignItems: 'center',\n    color: 'white',\n  };\n\n  const iconStyle = {\n    cursor: 'pointer',\n  };\n\n  const pathBar = {\n    position: 'absolute',\n    bottom: 0,\n    textAlign: 'left',\n    backgroundColor: '#c5e3df9d',\n    color: 'white',\n    width: '100%',\n    padding: '10px',\n  };\n\n  return (\n    <div style={{ position: 'relative', display: 'flex', color: 'white', flexDirection: 'column', height: '55.5vh' }}>\n      <div style={{ flexGrow: 1, display: 'flex', flexDirection: 'column', overflow: 'hidden' }}>\n        <div style={gridStyle}>\n          {contents.files.map((item, index) => (\n            <div key={index} style={itemStyle}>\n              <div style={iconStyle} onClick={() => handleItemClick(item, contents.filestype[index])}>\n                {getIconForType(contents.filestype[index])}\n              </div>\n              <div>{item}</div>\n            </div>\n          ))}\n        </div>\n      </div>\n      <p style={pathBar}>{path}</p>\n    </div>\n  );\n});\n\nexport { DirectoryViewer };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}